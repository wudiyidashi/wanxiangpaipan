# ä¸‡è±¡æ’ç›˜ - å¤šæœ¯æ•°ç³»ç»Ÿå¹³å°

<div align="center">

**ä¸“ä¸šçš„ä¸­å›½ä¼ ç»Ÿæœ¯æ•°å åœåº”ç”¨ | å¯æ‰©å±•çš„å¤šç³»ç»Ÿæ¶æ„**

[![Flutter](https://img.shields.io/badge/Flutter-3.24+-blue.svg)](https://flutter.dev)
[![Dart](https://img.shields.io/badge/Dart-3.0+-blue.svg)](https://dart.dev)
[![License](https://img.shields.io/badge/License-Apache%202.0-green.svg)](LICENSE)

[ç®€ä½“ä¸­æ–‡](README.md) | [English](README_EN.md)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

ä¸‡è±¡æ’ç›˜æ˜¯ä¸€æ¬¾åŸºäº Flutter å¼€å‘çš„**è·¨å¹³å°å¤šæœ¯æ•°ç³»ç»Ÿå¹³å°**ï¼Œæ—¨åœ¨ä¸ºä¼ ç»Ÿæœ¯æ•°çˆ±å¥½è€…å’Œä¸“ä¸šä»ä¸šè€…æä¾›ä¸“ä¸šã€å‡†ç¡®ã€æ˜“ç”¨çš„æ•°å­—åŒ–å·¥å…·ã€‚

### ğŸ¯ é¡¹ç›®æ„¿æ™¯

- **å¤šç³»ç»Ÿæ”¯æŒ**: ç»Ÿä¸€å¹³å°æ”¯æŒå¤šç§ä¸­å›½ä¼ ç»Ÿæœ¯æ•°ç³»ç»Ÿï¼ˆå…­çˆ»ã€å¤§å…­å£¬ã€å°å…­å£¬ã€æ¢…èŠ±æ˜“æ•°ç­‰ï¼‰
- **ä¸“ä¸šå‡†ç¡®**: ä¸¥æ ¼éµå¾ªä¼ ç»Ÿæœ¯æ•°ç†è®ºï¼Œæä¾›å‡†ç¡®çš„å¦è±¡è®¡ç®—å’Œè§£æ
- **å¼€æ”¾æ‰©å±•**: åŸºäºæ’ä»¶åŒ–æ¶æ„ï¼Œå¼€å‘è€…å¯è½»æ¾æ·»åŠ æ–°çš„æœ¯æ•°ç³»ç»Ÿ
- **éšç§å®‰å…¨**: æ‰€æœ‰æ•°æ®æœ¬åœ°åŠ å¯†å­˜å‚¨ï¼Œå®Œå…¨ç¦»çº¿å¯ç”¨

### âœ¨ æ ¸å¿ƒç‰¹æ€§

#### ğŸ”® å·²å®Œæ•´å®ç°çš„ç³»ç»Ÿ

**å…­çˆ»ç³»ç»Ÿ** (Liu Yao)
- âœ… ä¸‰ç§èµ·å¦æ–¹å¼ï¼ˆæ‘‡é’±æ³•ã€æ—¶é—´èµ·å¦ã€æ‰‹åŠ¨è¾“å…¥ï¼‰
- âœ… å®Œæ•´çº³ç”²è£…å¦ï¼ˆåœ°æ”¯ã€å¤©å¹²ã€å…­äº²ã€äº”è¡Œï¼‰
- âœ… ä¸–åº”å®šä½ã€åŠ¨çˆ»å˜å¦
- âœ… å…­ç¥é…ç½®ï¼ˆé’é¾™ã€æœ±é›€ã€å‹¾é™ˆã€è…¾è›‡ã€ç™½è™ã€ç„æ­¦ï¼‰
- âœ… ç©ºäº¡è®¡ç®—ã€å†œå†ä¿¡æ¯

#### ğŸš§ é¢„ç•™éª¨æ¶ï¼ˆå¾…å®ç°ï¼‰

- **å¤§å…­å£¬ç³»ç»Ÿ** (Da Liu Ren): å››è¯¾ä¸‰ä¼ ã€åäºŒç¥å°†ã€ç¥ç…ç³»ç»Ÿ
- **å°å…­å£¬ç³»ç»Ÿ** (Xiao Liu Ren): å…­ç¥æ¨ç®—ï¼ˆå¤§å®‰ã€ç•™è¿ã€é€Ÿå–œã€èµ¤å£ã€å°å‰ã€ç©ºäº¡ï¼‰
- **æ¢…èŠ±æ˜“æ•°ç³»ç»Ÿ** (Mei Hua): æ—¶é—´/æ•°å­—/ç‰©è±¡èµ·å¦ã€ä½“ç”¨åˆ¤æ–­

#### ğŸ› ï¸ å¹³å°åŠŸèƒ½

- **ç»Ÿä¸€å†å²è®°å½•**: è·¨ç³»ç»Ÿçš„ç»Ÿä¸€è®°å½•ç®¡ç†å’Œæœç´¢
- **åŠ å¯†å­˜å‚¨**: ç”¨æˆ·é—®é¢˜å’Œè§£è¯»ä¿¡æ¯ç«¯åˆ°ç«¯åŠ å¯†
- **ç¦»çº¿ä¼˜å…ˆ**: æ‰€æœ‰åŠŸèƒ½å®Œå…¨ç¦»çº¿å¯ç”¨
- **å¯¼å‡ºåˆ†äº«**: æ”¯æŒè®°å½•å¯¼å‡ºå’Œåˆ†äº«ï¼ˆå¾…å®ç°ï¼‰

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### å¤šæœ¯æ•°ç³»ç»Ÿæ¶æ„

æœ¬é¡¹ç›®çš„æ ¸å¿ƒåˆ›æ–°åœ¨äº**å¯æ‰©å±•çš„å¤šç³»ç»Ÿæ¶æ„**ï¼Œé€šè¿‡æ¥å£æŠ½è±¡å’Œæ³¨å†Œè¡¨æ¨¡å¼å®ç°æœ¯æ•°ç³»ç»Ÿçš„æ’ä»¶åŒ–ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Presentation Layer (lib/presentation/)                     â”‚
â”‚  â””â”€ åŠ¨æ€ UI (é€šè¿‡ DivinationUIFactory æ„å»º)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ uses
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ViewModel Layer (lib/viewmodels/)                          â”‚
â”‚  â””â”€ DivinationViewModel<T> (æ³›å‹åŸºç±»)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ uses
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Divination System Layer (lib/divination_systems/)          â”‚
â”‚  â”œâ”€ DivinationSystem (æ¥å£)                                 â”‚
â”‚  â”œâ”€ DivinationRegistry (ç³»ç»Ÿæ³¨å†Œè¡¨)                         â”‚
â”‚  â”œâ”€ LiuYaoSystem âœ… (å…­çˆ»å®Œæ•´å®ç°)                          â”‚
â”‚  â”œâ”€ DaLiuRenSystem ğŸš§ (éª¨æ¶)                                â”‚
â”‚  â”œâ”€ XiaoLiuRenSystem ğŸš§ (éª¨æ¶)                              â”‚
â”‚  â””â”€ MeiHuaSystem ğŸš§ (éª¨æ¶)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ uses
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Repository Layer (lib/domain/repositories/)                â”‚
â”‚  â””â”€ ç»Ÿä¸€çš„ DivinationRepository (å¤šæ€å­˜å‚¨)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ uses
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Layer (lib/data/)                                     â”‚
â”‚  â”œâ”€ DivinationRecords è¡¨ (æ–°æ¶æ„ï¼Œå¤šæ€å­˜å‚¨)                 â”‚
â”‚  â””â”€ GuaRecords è¡¨ (æ—§æ¶æ„ï¼Œå‘åå…¼å®¹)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ uses
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Shared Services (lib/domain/services/shared/)              â”‚
â”‚  â”œâ”€ TianGanDiZhiService (å¤©å¹²åœ°æ”¯è®¡ç®—)                      â”‚
â”‚  â”œâ”€ WuXingService (äº”è¡Œç”Ÿå…‹)                                â”‚
â”‚  â”œâ”€ LiuQinService (å…­äº²æ¨ç®—)                                â”‚
â”‚  â””â”€ LunarService (å†œå†è½¬æ¢)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¥å£è®¾è®¡

#### DivinationSystem (æœ¯æ•°ç³»ç»Ÿæ¥å£)

æ‰€æœ‰æœ¯æ•°ç³»ç»Ÿéƒ½å¿…é¡»å®ç°æ­¤æ¥å£ï¼š

```dart
abstract class DivinationSystem {
  DivinationType get type;           // ç³»ç»Ÿç±»å‹æšä¸¾
  String get name;                   // ç³»ç»Ÿåç§°
  String get description;            // ç³»ç»Ÿæè¿°
  bool get isEnabled;                // æ˜¯å¦å¯ç”¨

  // æ‰§è¡Œå åœ
  Future<DivinationResult> cast({
    required CastMethod method,
    required Map<String, dynamic> input,
    DateTime? castTime,
  });

  // ä» JSON ååºåˆ—åŒ–ç»“æœ
  DivinationResult resultFromJson(Map<String, dynamic> json);

  // éªŒè¯è¾“å…¥å‚æ•°
  bool validateInput(CastMethod method, Map<String, dynamic> input);
}
```

#### DivinationResult (å åœç»“æœæ¥å£)

æ‰€æœ‰å åœç»“æœéƒ½å¿…é¡»å®ç°æ­¤æ¥å£ï¼š

```dart
abstract class DivinationResult {
  String get id;                     // å”¯ä¸€æ ‡è¯†
  DivinationType get systemType;     // æ‰€å±ç³»ç»Ÿ
  DateTime get castTime;             // å åœæ—¶é—´
  CastMethod get castMethod;         // èµ·å¦æ–¹å¼
  LunarInfo get lunarInfo;           // å†œå†ä¿¡æ¯

  String getSummary();               // è·å–æ‘˜è¦ï¼ˆç”¨äºåˆ—è¡¨æ˜¾ç¤ºï¼‰
  Map<String, dynamic> toJson();     // åºåˆ—åŒ–ä¸º JSON
}
```

### MVVM + Repository æ¨¡å¼

```
User Action â†’ ViewModel â†’ Repository â†’ Data Source
                â†“
         notifyListeners()
                â†“
            UI Update
```

### æ¶æ„ä¼˜åŠ¿

- âœ… **é›¶è¿ç§»æ‰©å±•**: æ·»åŠ æ–°ç³»ç»Ÿæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç æˆ–æ•°æ®åº“ç»“æ„
- âœ… **ç±»å‹å®‰å…¨**: æ³›å‹è®¾è®¡ä¿è¯ç¼–è¯‘æœŸç±»å‹æ£€æŸ¥
- âœ… **ç»Ÿä¸€å­˜å‚¨**: å¤šæ€ JSON å­˜å‚¨ï¼Œç»Ÿä¸€æŸ¥è¯¢æ¥å£
- âœ… **UI è§£è€¦**: æ¯ä¸ªç³»ç»Ÿè‡ªå®šä¹‰ UIï¼Œé€šè¿‡å·¥å‚æ¨¡å¼åŠ¨æ€æ„å»º
- âœ… **æµ‹è¯•å‹å¥½**: æ¥å£é©±åŠ¨è®¾è®¡ï¼Œæ˜“äº Mock å’Œå•å…ƒæµ‹è¯•

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Flutter SDK >= 3.24.0
- Dart SDK >= 3.0.0
- Android Studio / Xcodeï¼ˆç”¨äºè¿è¡Œæ¨¡æ‹Ÿå™¨ï¼‰
- Git

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/wudiyidashi/wanxiangpaipan.git
   cd wanxiangpaipan
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   flutter pub get
   ```

3. **ä»£ç ç”Ÿæˆ**
   ```bash
   flutter pub run build_runner build --delete-conflicting-outputs
   ```

4. **è¿è¡Œåº”ç”¨**
   ```bash
   # iOS
   flutter run -d ios

   # Android
   flutter run -d android

   # æ‰€æœ‰è®¾å¤‡
   flutter run
   ```

### å¼€å‘æ¨¡å¼

```bash
# ä»£ç ç”Ÿæˆç›‘å¬æ¨¡å¼ï¼ˆæ¨èå¼€å‘æ—¶ä½¿ç”¨ï¼‰
flutter pub run build_runner watch --delete-conflicting-outputs

# ä»£ç åˆ†æ
flutter analyze

# è¿è¡Œæµ‹è¯•
flutter test

# æµ‹è¯•è¦†ç›–ç‡
flutter test --coverage
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ main.dart                          # åº”ç”¨å…¥å£ + ç³»ç»Ÿæ³¨å†Œ
â”œâ”€â”€ /core                              # æ ¸å¿ƒåŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ /constants                     # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ /router                        # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ /theme                         # ä¸»é¢˜é…ç½®
â”‚   â””â”€â”€ /utils                         # å·¥å…·å‡½æ•°
â”œâ”€â”€ /divination_systems                # ğŸ”¥ å¤šæœ¯æ•°ç³»ç»Ÿå®ç°
â”‚   â”œâ”€â”€ registry_bootstrap.dart        # è‡ªåŠ¨æ³¨å†Œæ‰€æœ‰ç³»ç»Ÿ
â”‚   â”œâ”€â”€ /liuyao                        # å…­çˆ»ç³»ç»Ÿ âœ…
â”‚   â”‚   â”œâ”€â”€ liuyao_system.dart         # DivinationSystem å®ç°
â”‚   â”‚   â”œâ”€â”€ /models
â”‚   â”‚   â”‚   â””â”€â”€ liuyao_result.dart     # DivinationResult å®ç°
â”‚   â”‚   â”œâ”€â”€ /ui
â”‚   â”‚   â”‚   â””â”€â”€ liuyao_ui_factory.dart # UI å·¥å‚
â”‚   â”‚   â””â”€â”€ /viewmodels
â”‚   â”‚       â””â”€â”€ liuyao_viewmodel.dart  # ViewModel<LiuYaoResult>
â”‚   â”œâ”€â”€ /daliuren                      # å¤§å…­å£¬ç³»ç»Ÿ ğŸš§
â”‚   â”œâ”€â”€ /xiaoliuren                    # å°å…­å£¬ç³»ç»Ÿ ğŸš§
â”‚   â””â”€â”€ /meihua                        # æ¢…èŠ±æ˜“æ•°ç³»ç»Ÿ ğŸš§
â”œâ”€â”€ /models                            # å…±äº«æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ yao.dart                       # çˆ»æ¨¡å‹ï¼ˆå…­çˆ»ä¸“ç”¨ï¼‰
â”‚   â”œâ”€â”€ gua.dart                       # å¦æ¨¡å‹ï¼ˆå…­çˆ»ä¸“ç”¨ï¼‰
â”‚   â””â”€â”€ lunar_info.dart                # å†œå†ä¿¡æ¯ï¼ˆè·¨ç³»ç»Ÿå…±äº«ï¼‰
â”œâ”€â”€ /domain                            # é¢†åŸŸå±‚ï¼ˆçº¯å‡½æ•°ï¼‰
â”‚   â”œâ”€â”€ divination_system.dart         # ğŸ”¥ æ ¸å¿ƒæ¥å£
â”‚   â”œâ”€â”€ divination_registry.dart       # ğŸ”¥ ç³»ç»Ÿæ³¨å†Œè¡¨
â”‚   â”œâ”€â”€ /repositories                  # Repository æ¥å£
â”‚   â”‚   â””â”€â”€ divination_repository.dart # ç»Ÿä¸€å åœè®°å½•ä»“åº“
â”‚   â””â”€â”€ /services                      # ä¸šåŠ¡æœåŠ¡
â”‚       â”œâ”€â”€ /shared                    # ğŸ”¥ è·¨ç³»ç»Ÿå…±äº«æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ tiangan_dizhi_service.dart
â”‚       â”‚   â”œâ”€â”€ wuxing_service.dart
â”‚       â”‚   â”œâ”€â”€ liuqin_service.dart
â”‚       â”‚   â””â”€â”€ lunar_service.dart
â”‚       â””â”€â”€ gua_calculator.dart        # å…­çˆ»ä¸“ç”¨ç®—æ³•
â”œâ”€â”€ /data                              # æ•°æ®å±‚
â”‚   â”œâ”€â”€ /database                      # Drift æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ app_database.dart
â”‚   â”‚   â””â”€â”€ tables.dart                # DivinationRecords + GuaRecords
â”‚   â”œâ”€â”€ /secure                        # åŠ å¯†å­˜å‚¨
â”‚   â””â”€â”€ /repositories                  # Repository å®ç°
â”‚       â””â”€â”€ divination_repository_impl.dart # å¤šæ€å­˜å‚¨é€‚é…å™¨
â”œâ”€â”€ /viewmodels                        # ViewModel å±‚
â”‚   â””â”€â”€ divination_viewmodel.dart      # ğŸ”¥ æ³›å‹åŸºç±»
â””â”€â”€ /presentation                      # UI å±‚
    â”œâ”€â”€ divination_ui_registry.dart    # ğŸ”¥ UI å·¥å‚æ³¨å†Œè¡¨
    â”œâ”€â”€ /screens                       # é¡µé¢
    â”‚   â”œâ”€â”€ /home                      # ä¸»ç•Œé¢ï¼ˆç³»ç»Ÿé€‰æ‹©ï¼‰
    â”‚   â”œâ”€â”€ /cast                      # èµ·å¦ç•Œé¢ï¼ˆåŠ¨æ€æ„å»ºï¼‰
    â”‚   â”œâ”€â”€ /result                    # ç»“æœå±•ç¤ºï¼ˆåŠ¨æ€æ„å»ºï¼‰
    â”‚   â””â”€â”€ /history                   # å†å²è®°å½•ï¼ˆç»Ÿä¸€åˆ—è¡¨ï¼‰
    â””â”€â”€ /widgets                       # å¯å¤ç”¨ç»„ä»¶

test/                                  # æµ‹è¯•ï¼ˆ99.6% è¦†ç›–ç‡ï¼‰
docs/                                  # æ–‡æ¡£
```

---

## ğŸ§° æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **è¯­è¨€** | Dart | 3.0+ | å¼ºç±»å‹ç³»ç»Ÿ |
| **æ¡†æ¶** | Flutter | 3.24+ | è·¨å¹³å° UI æ¡†æ¶ |
| **çŠ¶æ€ç®¡ç†** | Provider | 6.x | ä¾èµ–æ³¨å…¥ + å“åº”å¼çŠ¶æ€ |
| **ä¸å¯å˜æ¨¡å‹** | freezed | 2.x | ä»£ç ç”Ÿæˆï¼ˆæ•°æ®ç±»ï¼‰ |
| **JSON åºåˆ—åŒ–** | json_serializable | 6.x | JSON åºåˆ—åŒ– |
| **è·¯ç”±** | go_router | 14.x | å£°æ˜å¼è·¯ç”± |
| **æœ¬åœ°æ•°æ®åº“** | drift | 2.x | ç±»å‹å®‰å…¨ SQL |
| **åŠ å¯†å­˜å‚¨** | flutter_secure_storage | 9.x | Keychain/Keystore |
| **å†œå†è®¡ç®—** | lunar | 1.7.8 | å¤©å¹²åœ°æ”¯ã€å…­åç”²å­ |
| **æµ‹è¯•** | flutter_test + mocktail | - | å•å…ƒ/Widget æµ‹è¯• |

---

## ğŸ”Œ å¦‚ä½•æ·»åŠ æ–°çš„æœ¯æ•°ç³»ç»Ÿ

æœ¬é¡¹ç›®çš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯**é›¶è¿ç§»æ‰©å±•æ€§**ã€‚æ·»åŠ æ–°ç³»ç»Ÿåªéœ€ä»¥ä¸‹æ­¥éª¤ï¼š

### 1. åˆ›å»ºç³»ç»Ÿç›®å½•ç»“æ„

```bash
lib/divination_systems/your_system/
â”œâ”€â”€ your_system_system.dart       # å®ç° DivinationSystem
â”œâ”€â”€ /models
â”‚   â””â”€â”€ your_system_result.dart   # å®ç° DivinationResult
â”œâ”€â”€ /ui
â”‚   â””â”€â”€ your_system_ui_factory.dart # å®ç° DivinationUIFactory
â””â”€â”€ /viewmodels
    â””â”€â”€ your_system_viewmodel.dart  # æ‰©å±• DivinationViewModel<T>
```

### 2. å®ç°æ ¸å¿ƒæ¥å£

```dart
// your_system_system.dart
class YourSystem implements DivinationSystem {
  @override
  DivinationType get type => DivinationType.yourSystem;

  @override
  String get name => 'ä½ çš„ç³»ç»Ÿåç§°';

  @override
  bool get isEnabled => true; // è®¾ä¸º true å¯ç”¨

  @override
  Future<DivinationResult> cast(...) async {
    // å®ç°å åœé€»è¾‘
  }

  @override
  DivinationResult resultFromJson(Map<String, dynamic> json) {
    return YourSystemResult.fromJson(json);
  }
}
```

### 3. æ³¨å†Œç³»ç»Ÿ

åœ¨ `lib/divination_systems/registry_bootstrap.dart` ä¸­æ³¨å†Œï¼š

```dart
void registerDivinationSystems() {
  final registry = DivinationRegistry.instance;

  // æ³¨å†Œç³»ç»Ÿ
  registry.register(YourSystem());

  // æ³¨å†Œ UI å·¥å‚
  DivinationUIRegistry.instance.register(
    DivinationType.yourSystem,
    YourSystemUIFactory(),
  );
}
```

### 4. å®Œæˆï¼ğŸ‰

æ— éœ€ä¿®æ”¹æ•°æ®åº“ã€è·¯ç”±æˆ–ä»»ä½•ç°æœ‰ä»£ç ã€‚æ–°ç³»ç»Ÿä¼šè‡ªåŠ¨å‡ºç°åœ¨ä¸»ç•Œé¢ï¼Œæ‰€æœ‰åŠŸèƒ½ï¼ˆèµ·å¦ã€ä¿å­˜ã€å†å²è®°å½•ï¼‰å¼€ç®±å³ç”¨ã€‚

**è¯¦ç»†æŒ‡å—**: å‚è§ [docs/architecture.md](docs/architecture.md)

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

é¡¹ç›®é‡‡ç”¨**æµ‹è¯•é©±åŠ¨å¼€å‘**ï¼Œå½“å‰æµ‹è¯•è¦†ç›–ç‡ **99.6%** (227/228 tests passing)ã€‚

### æµ‹è¯•é‡‘å­—å¡”

- **Domain Services**: 90%+ è¦†ç›–ç‡ï¼ˆçº¯å‡½æ•°ï¼Œå®Œå…¨å¯æµ‹è¯•ï¼‰
- **ViewModel Layer**: 80%+ è¦†ç›–ç‡
- **Widget Layer**: 70%+ è¦†ç›–ç‡

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
flutter test

# è¿è¡Œç‰¹å®šæµ‹è¯•
flutter test test/unit/domain/services/

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
flutter test --coverage
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼æ— è®ºæ˜¯æ–°åŠŸèƒ½ã€Bug ä¿®å¤è¿˜æ˜¯æ–‡æ¡£æ”¹è¿›ã€‚

### è´¡çŒ®æµç¨‹

1. **Fork æœ¬é¡¹ç›®**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯** (`git checkout -b feature/AmazingFeature`)
3. **æäº¤ä»£ç ** (`git commit -m 'feat: Add some AmazingFeature'`)
4. **æ¨é€åˆ°åˆ†æ”¯** (`git push origin feature/AmazingFeature`)
5. **æäº¤ Pull Request**

### æäº¤è§„èŒƒ

éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `refactor`: ä»£ç é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·é“¾é…ç½®

### ä»£ç é£æ ¼

- ä½¿ç”¨ `flutter analyze` æ£€æŸ¥ä»£ç è´¨é‡
- ä½¿ç”¨ `flutter format` æ ¼å¼åŒ–ä»£ç 
- æ‰€æœ‰ PR å¿…é¡»é€šè¿‡ CI æµ‹è¯•
- æ–°åŠŸèƒ½éœ€åŒ…å«å•å…ƒæµ‹è¯•

---

## ğŸ“‹ å¼€å‘è·¯çº¿å›¾

### âœ… Phase 1: åŸºç¡€æ¶æ„ (å·²å®Œæˆ)

- [x] å¤šæœ¯æ•°ç³»ç»Ÿæ¶æ„è®¾è®¡
- [x] æ³›å‹ ViewModel åŸºç±»
- [x] é›¶è¿ç§»æ•°æ®å±‚
- [x] å…­çˆ»ç³»ç»Ÿå®Œæ•´å®ç°
- [x] æµ‹è¯•è¦†ç›–ç‡ 99.6%

### ğŸš§ Phase 2: ç³»ç»Ÿæ‰©å±• (è¿›è¡Œä¸­)

- [ ] å¤§å…­å£¬ç³»ç»Ÿå®ç°
- [ ] å°å…­å£¬ç³»ç»Ÿå®ç°
- [ ] æ¢…èŠ±æ˜“æ•°ç³»ç»Ÿå®ç°
- [ ] å¯¼å‡º/åˆ†äº«åŠŸèƒ½

### ğŸ”® Phase 3: å¢å¼ºåŠŸèƒ½ (è®¡åˆ’ä¸­)

- [ ] äº‘åŒæ­¥ï¼ˆå¯é€‰ï¼‰
- [ ] æ›´å¤šèµ·å¦æ–¹å¼
- [ ] AI è¾…åŠ©è§£å¦ï¼ˆå¯é€‰ï¼‰
- [ ] å¤šè¯­è¨€æ”¯æŒï¼ˆè‹±æ–‡ï¼‰

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache License 2.0](LICENSE) è®¸å¯è¯ã€‚

---

## ğŸ“ è”ç³»æ–¹å¼

- **Issues**: [GitHub Issues](https://github.com/wudiyidashi/wanxiangpaipan/issues)
- **è®¨è®º**: [GitHub Discussions](https://github.com/wudiyidashi/wanxiangpaipan/discussions)

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

ç‰¹åˆ«æ„Ÿè°¢ï¼š
- [lunar](https://pub.dev/packages/lunar) - å†œå†è®¡ç®—åº“
- [drift](https://pub.dev/packages/drift) - é«˜æ€§èƒ½æœ¬åœ°æ•°æ®åº“
- Flutter ç¤¾åŒºçš„æ‰€æœ‰è´¡çŒ®è€…

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ï¸ Starï¼**

Made with â¤ï¸ by Chinese Divination Enthusiasts

</div>
